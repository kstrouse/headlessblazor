@using HeadlessUI.Utilities

@typeparam TValue

@if (Static || this.Listbox.State == ListboxState.Open)
{
    <KeyDownEventHandler @ref="keyDownEventHandler" OnKeyDown="HandleKeyDown" PreventDefaultForKeys="new() {
            KeyboardKey.Space,
            KeyboardKey.Enter,
            KeyboardKey.ArrowDown,
            KeyboardKey.ArrowUp,
            KeyboardKey.Home,
            KeyboardKey.End,
            KeyboardKey.Escape
        }" />

    <HtmlElement TagName="@TagName" 
                @ref="rootElement" Id="Id" 
                @attributes="AdditionalAttributes" 
                class="@CssClass" 
                tabindex="-1" 
                role="listbox" 
                aria-labelledby="@Listbox.LabelId" 
                aria-activedescendant="@Listbox.ActiveOptionId">
        @ChildContent
    </HtmlElement>
}
