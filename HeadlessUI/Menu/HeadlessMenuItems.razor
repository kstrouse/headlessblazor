@using HeadlessUI.Utilities

@if (Static || this.Menu.State == MenuState.Open)
{
    <KeyDownEventHandler @ref="keyDownEventHandler" OnKeyDown="HandleKeyDown" PreventDefaultForKeys="new() {
            KeyboardKey.Space,
            KeyboardKey.Enter,
            KeyboardKey.ArrowDown,
            KeyboardKey.ArrowUp,
            KeyboardKey.Home,
            KeyboardKey.End,
            KeyboardKey.Escape
        }" />

    <HtmlElement TagName="@TagName" @ref="rootElement"
                 @attributes="AdditionalAttributes"
                 Id="@Id"
                 class="@CssClass"
                 role="menu"
                 tabindex="-1"
                 aria-activedescendant="@Menu.ActiveItemId"
                 aria-labelledby="@Menu.ButtonElementId">
        @ChildContent
    </HtmlElement>
}